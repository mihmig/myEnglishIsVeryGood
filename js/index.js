var answers = {
    'm1vAtA' : {
        'm1vAtAq01': '6',
        'm1vAtAq02': '4',
        'm1vAtAq03': '2',
        'm1vAtAq04': '10',
        'm1vAtAq05': '8',
        'm1vAtAq06': '9',
        'm1vAtAq07': '7',
        'm1vAtAq08': '5'
    },
    'm1vAtB' : {
        'm1vAtBq01': '5',
        'm1vAtBq02': '1',
        'm1vAtBq03': '7',
        'm1vAtBq04': '4',
        'm1vAtBq05': '9',
        'm1vAtBq06': '6',
        'm1vAtBq07': '8'
    },
    'm1vAtC' : {
        'm1vAtCq01': '2',
        'm1vAtCq02': '2',
        'm1vAtCq03': '1',
        'm1vAtCq04': '2',
        'm1vAtCq05': '2',
        'm1vAtCq06': '2',
        'm1vAtCq07': '1',
        'm1vAtCq08': '2',
        'm1vAtCq09': '1',
        'm1vAtCq10': '1',
    },
    'm1vAtD': {
        'm1vAtDq01': 'rarely left',
        'm1vAtDq02': 'did you take',
        'm1vAtDq03': 'was watering',
        'm1vAtDq04': 'didnt meet',
        'm1vAtDq05': 'was listening'
    },
    'm1vAtF': {
        'm1vAtFq01': '5',
        'm1vAtFq02': '3',
        'm1vAtFq03': '2',
        'm1vAtFq04': '1',
        'm1vAtFq05': '4'
    },
    'm1vAtG': {
        'm1vAtGq01': '1',
        'm1vAtGq02': '2',
        'm1vAtGq03': '1',
        'm1vAtGq04': '1',
        'm1vAtGq05': '2'
    },
    'm1vAtH': {
        'm1vAtHq01': '3',
        'm1vAtHq02': '6',
        'm1vAtHq03': '1',
        'm1vAtHq04': '5',
        'm1vAtHq05': '4'
    },
    'm1vBtA' : {
        'm1vBtAq01': '2',
        'm1vBtAq02': '8',
        'm1vBtAq03': '3',
        'm1vBtAq04': '6',
        'm1vBtAq05': '4',
        'm1vBtAq06': '5',
        'm1vBtAq07': '9',
        'm1vBtAq08': '7'
    },
    'm1vBtB' : {
        'm1vBtBq01': '6',
        'm1vBtBq02': '7',
        'm1vBtBq03': '10',
        'm1vBtBq04': '4',
        'm1vBtBq05': '8',
        'm1vBtBq06': '2',
        'm1vBtBq07': '5'
    },
    'm1vBtC' : {
        'm1vBtCq01': '1',
        'm1vBtCq02': '1',
        'm1vBtCq03': '2',
        'm1vBtCq04': '1',
        'm1vBtCq05': '2',
        'm1vBtCq06': '2',
        'm1vBtCq07': '2',
        'm1vBtCq08': '1',
        'm1vBtCq09': '2',
        'm1vBtCq10': '2',
    },
    'm1vBtD': {
        'm1vBtDq01': 'didnt meet',
        'm1vBtDq02': 'were you doing',
        'm1vBtDq03': 'was listening',
        'm1vBtDq04': 'left',
        'm1vBtDq05': 'did you start'
    },
    'm1vBtE': {
        'm1vBtEq01': 'the most selfish',
        'm1vBtEq02': 'duller',
        'm1vBtEq03': 'the least',
        'm1vBtEq04': 'more',
        'm1vBtEq05': 'better'
    },
    'm1vBtF': {
        'm1vBtFq01': '4',
        'm1vBtFq02': '5',
        'm1vBtFq03': '1',
        'm1vBtFq04': '2',
        'm1vBtFq05': '3'
    },
    'm1vBtG': {
        'm1vBtGq01': '1',
        'm1vBtGq02': '2',
        'm1vBtGq03': '1',
        'm1vBtGq04': '2',
        'm1vBtGq05': '1'
    },
    'm1vBtH': {
        'm1vBtHq01': '6',
        'm1vBtHq02': '4',
        'm1vBtHq03': '5',
        'm1vBtHq04': '1',
        'm1vBtHq05': '3'
    },'m2vAtA' : {
        'm2vAtAq01': '2',
        'm2vAtAq02': '2',
        'm2vAtAq03': '1',
        'm2vAtAq04': '2',
        'm2vAtAq05': '1',
        'm2vAtAq06': '1',
        'm2vAtAq07': '2',
        'm2vAtAq08': '1',
        'm2vAtAq09': '2',
        'm2vAtAq10': '1'
    },
    'm2vAtB' : {
        'm2vAtBq01': '3',
        'm2vAtBq02': '5',
        'm2vAtBq03': '7',
        'm2vAtBq04': '4',
        'm2vAtBq05': '1'
    },
    'm2vAtC' : {
        'm2vAtCq01': 'havent bought',
        'm2vAtCq02': 'have you been writing',
        'm2vAtCq03': 'has gone',
        'm2vAtCq04': 'have you ever eaten',
        'm2vAtCq05': 'has been working',
    },
    'm2vAtD': {
        'm2vAtDq01': '1',
        'm2vAtDq02': '2',
        'm2vAtDq03': '2',
        'm2vAtDq04': '2',
        'm2vAtDq05': '1',
        'm2vAtDq06': '1',
        'm2vAtDq07': '1',
        'm2vAtDq08': '2',
        'm2vAtDq09': '1',
        'm2vAtDq10': '1'
    },
    'm2vAtE': {
        'm2vAtEq01': '2',
        'm2vAtEq02': '1',
        'm2vAtEq03': '5',
        'm2vAtEq04': '3',
        'm2vAtEq05': '4'
    },
    'm2vAtF': {
        'm2vAtFq01': '2',
        'm2vAtFq02': '3',
        'm2vAtFq03': '2',
        'm2vAtFq04': '1',
        'm2vAtFq05': '1',
        'm2vAtFq06': '2',
        'm2vAtFq07': '3',
        'm2vAtFq08': '3',
        'm2vAtFq09': '2',
        'm2vAtFq10': '1'
    },
    'm2vAtH': {
        'm2vAtHq01': '4',
        'm2vAtHq02': '2',
        'm2vAtHq03': '6',
        'm2vAtHq04': '1',
        'm2vAtHq05': '5'
    },
    'm2vBtA' : {
        'm2vBtAq01': '1',
        'm2vBtAq02': '1',
        'm2vBtAq03': '2',
        'm2vBtAq04': '2',
        'm2vBtAq05': '2',
        'm2vBtAq06': '1',
        'm2vBtAq07': '1',
        'm2vBtAq08': '2',
        'm2vBtAq09': '2',
        'm2vBtAq10': '2'
    },
    'm2vBtB' : {
        'm2vBtBq01': '3',
        'm2vBtBq02': '7',
        'm2vBtBq03': '1',
        'm2vBtBq04': '2',
        'm2vBtBq05': '6'
    },
    'm2vBtC' : {
        'm2vBtCq01': 'has been working',
        'm2vBtCq02': 'have you ever eaten',
        'm2vBtCq03': 'has gone',
        'm2vBtCq04': 'have you been cleaning',
        'm2vBtCq05': 'havent bought',
    },
    'm2vBtD': {
        'm2vBtDq01': '1',
        'm2vBtDq02': '1',
        'm2vBtDq03': '1',
        'm2vBtDq04': '2',
        'm2vBtDq05': '1',
        'm2vBtDq06': '2',
        'm2vBtDq07': '1',
        'm2vBtDq08': '2',
        'm2vBtDq09': '2',
        'm2vBtDq10': '1'
    },
    'm2vBtE': {
        'm2vBtEq01': '2',
        'm2vBtEq02': '1',
        'm2vBtEq03': '5',
        'm2vBtEq04': '3',
        'm2vBtEq05': '4'
    },
    'm2vBtF': {
        'm2vBtFq01': '2',
        'm2vBtFq02': '3',
        'm2vBtFq03': '2',
        'm2vBtFq04': '1',
        'm2vBtFq05': '1',
        'm2vBtFq06': '2',
        'm2vBtFq07': '3',
        'm2vBtFq08': '3',
        'm2vBtFq09': '2',
        'm2vBtFq10': '1'
    },
    'm2vBtH': {
        'm2vBtHq01': '4',
        'm2vBtHq02': '2',
        'm2vBtHq03': '6',
        'm2vBtHq04': '1',
        'm2vBtHq05': '5'
    },
    'm3vAtA' : {
        'm3vAtAq01': '2',
        'm3vAtAq02': '1',
        'm3vAtAq03': '1',
        'm3vAtAq04': '2',
        'm3vAtAq05': '1',
        'm3vAtAq06': '2',
        'm3vAtAq07': '2',
        'm3vAtAq08': '1'
    },
    'm3vAtB' : {
        'm3vAtBq01': '6',
        'm3vAtBq02': '9',
        'm3vAtBq03': '12',
        'm3vAtBq04': '2',
        'm3vAtBq05': '7',
        'm3vAtBq06': '5',
        'm3vAtBq07': '1',
        'm3vAtBq08': '8',
        'm3vAtBq09': '4'
    },
    'm3vAtC' : {
        'm3vAtCq01': 'had been studying',
        'm3vAtCq02': 'hadnt finished',
        'm3vAtCq03': 'had you been studying',
        'm3vAtCq04': 'had lived',
        'm3vAtCq05': 'had she finished',
    },
    'm3vAtD' : {
        'm3vAtDq01': 'went',
        'm3vAtDq02': 'had performed',
        'm3vAtDq03': 'had you been waiting',
        'm3vAtDq04': 'did james graduate',
        'm3vAtDq05': 'didnt win',
    },
    'm3vAtE': {
        'm3vAtEq01': '1',
        'm3vAtEq02': '2',
        'm3vAtEq03': '2',
        'm3vAtEq04': '2',
        'm3vAtEq05': '1',
        'm3vAtEq06': '2',
        'm3vAtEq07': '1',
        'm3vAtEq08': '2',
        'm3vAtEq09': '2'
    },
    'm3vAtF': {
        'm3vAtFq01': '3',
        'm3vAtFq02': '5',
        'm3vAtFq03': '4',
        'm3vAtFq04': '1',
        'm3vAtFq05': '2'
    },
    'm3vAtG': {
        'm3vAtGq01': '1',
        'm3vAtGq02': '2',
        'm3vAtGq03': '4',
        'm3vAtGq04': '2',
        'm3vAtGq05': '4'
    },
    'm3vAtH': {
        'm3vAtHq01': '3',
        'm3vAtHq02': '2',
        'm3vAtHq03': '1',
        'm3vAtHq04': '4',
        'm3vAtHq05': '5'
    },
    'm3vBtA' : {
        'm3vBtAq01': '2',
        'm3vBtAq02': '1',
        'm3vBtAq03': '1',
        'm3vBtAq04': '2',
        'm3vBtAq05': '1',
        'm3vBtAq06': '2',
        'm3vBtAq07': '2',
        'm3vBtAq08': '1'
    },
    'm3vBtB' : {
        'm3vBtBq01': '2',
        'm3vBtBq02': '1',
        'm3vBtBq03': '4',
        'm3vBtBq04': '6',
        'm3vBtBq05': '8',
        'm3vBtBq06': '5',
        'm3vBtBq07': '9',
        'm3vBtBq08': '7',
        'm3vBtBq09': '12'
    },
    'm3vBtC' : {
        'm3vBtCq01': 'had he finished',
        'm3vBtCq02': 'had you been studying',
        'm3vBtCq03': 'had been living',
        'm3vBtCq04': 'hadnt finished',
        'm3vBtCq05': 'had gone',
    },
    'm3vBtD' : {
        'm3vBtDq01': 'did the children see',
        'm3vBtDq02': 'had been trying',
        'm3vBtDq03': 'had read',
        'm3vBtDq04': 'didnt come',
        'm3vBtDq05': 'performed',
    },
    'm3vBtE': {
        'm3vBtEq01': '1',
        'm3vBtEq02': '2',
        'm3vBtEq03': '2',
        'm3vBtEq04': '2',
        'm3vBtEq05': '1',
        'm3vBtEq06': '2',
        'm3vBtEq07': '1',
        'm3vBtEq08': '2',
        'm3vBtEq09': '2'
    },
    'm3vBtF': {
        'm3vBtFq01': '5',
        'm3vBtFq02': '3',
        'm3vBtFq03': '1',
        'm3vBtFq04': '4',
        'm3vBtFq05': '2'
    },
    'm3vBtG': {
        'm3vBtGq01': '1',
        'm3vBtGq02': '2',
        'm3vBtGq03': '4',
        'm3vBtGq04': '2',
        'm3vBtGq05': '4'
    },
    'm3vBtH': {
        'm3vBtHq01': '3',
        'm3vBtHq02': '2',
        'm3vBtHq03': '1',
        'm3vBtHq04': '4',
        'm3vBtHq05': '5'
    },
    'm7vAtA': {
        'm7vAtAq01': '2',
        'm7vAtAq02': '1',
        'm7vAtAq03': '1',
        'm7vAtAq04': '2',
        'm7vAtAq05': '1',
        'm7vAtAq06': '2',
        'm7vAtAq07': '2',
        'm7vAtAq08': '1',
    },
    'm7vAtB': {
        'm7vAtBq01': '2',
        'm7vAtBq02': '6',
        'm7vAtBq03': '10',
        'm7vAtBq04': '11',
        'm7vAtBq05': '8',
        'm7vAtBq06': '12',
        'm7vAtBq07': '4',
        'm7vAtBq08': '9',
        'm7vAtBq09': '7',
        'm7vAtBq10': '5'
    },
    'm7vAtC': {
        'm7vAtCq01': '2',
        'm7vAtCq02': '1',
        'm7vAtCq03': '2',
        'm7vAtCq04': '1',
        'm7vAtCq05': '2'
    },
    'm7vAtD': {
        'm7vAtDq01': 'on',
        'm7vAtDq02': 'from',
        'm7vAtDq03': 'for',
        'm7vAtDq04': 'about',
        'm7vAtDq05': 'to',
    },
    'm7vAtE': {
        'm7vAtEq01': 'b',
        'm7vAtEq02': 'c',
        'm7vAtEq03': 'a',
        'm7vAtEq04': 'e',
        'm7vAtEq05': 'd'
    },
    'm7vAtF': {
        'm7vAtFq01': 'b',
        'm7vAtFq02': 'a',
        'm7vAtFq03': 'a',
        'm7vAtFq04': 'b',
        'm7vAtFq05': 'b',
    },
    'm7vAtG': {
        'm7vAtGq01': 'b',
        'm7vAtGq02': 'c',
        'm7vAtGq03': 'c',
        'm7vAtGq04': 'b',
        'm7vAtGq05': 'a',
        'm7vAtGq06': 'b',
    },
    'm7vAtH': {
        'm7vAtHq01': 'b',
        'm7vAtHq02': 'a',
        'm7vAtHq03': 'f',
        'm7vAtHq04': 'c',
        'm7vAtHq05': 'e',
    },
    'm7vBtA': {
        'm7vBtAq01': '1',
        'm7vBtAq02': '2',
        'm7vBtAq03': '2',
        'm7vBtAq04': '1',
        'm7vBtAq05': '2',
        'm7vBtAq06': '1',
        'm7vBtAq07': '1',
        'm7vBtAq08': '2',
    },
    'm7vBtB': {
        'm7vBtBq01': 'generation',
        'm7vBtBq02': 'headline',
        'm7vBtBq03': 'forecast',
        'm7vBtBq04': 'test',
        'm7vBtBq05': 'impact',
        'm7vBtBq06': 'review',
        'm7vBtBq07': 'deal',
        'm7vBtBq08': 'fixed',
        'm7vBtBq09': 'gadgets',
        'm7vBtBq10': 'deal extension'
    },
    'm7vBtC': {
        'm7vBtCq01': '1',
        'm7vBtCq02': '1',
        'm7vBtCq03': '2',
        'm7vBtCq04': '2',
        'm7vBtCq05': '1'
    },
    'm7vBtD': {
        'm7vBtDq01': 'for',
        'm7vBtDq02': 'from',
        'm7vBtDq03': 'to',
        'm7vBtDq04': 'from',
        'm7vBtDq05': 'about',
    },
    'm7vBtE': {
        'm7vBtEq01': 'b',
        'm7vBtEq02': 'd',
        'm7vBtEq03': 'c',
        'm7vBtEq04': 'a',
        'm7vBtEq05': 'e'
    },
    'm7vBtF': {
        'm7vBtFq01': 'b',
        'm7vBtFq02': 'b',
        'm7vBtFq03': 'a',
        'm7vBtFq04': 'a',
        'm7vBtFq05': 'b',
    },
    'm7vBtG': {
        'm7vBtGq01': 'c',
        'm7vBtGq02': 'a',
        'm7vBtGq03': 'a',
        'm7vBtGq04': 'c',
        'm7vBtGq05': 'c',
        'm7vBtGq06': 'c',
    },
    'm7vBtH': {
        'm7vBtHq01': 'f',
        'm7vBtHq02': 'd',
        'm7vBtHq03': 'c',
        'm7vBtHq04': 'e',
        'm7vBtHq05': 'b',
    },
    'm8vAtA': {
        'm8vAtAq01': '2',
        'm8vAtAq02': '2',
        'm8vAtAq03': '1',
        'm8vAtAq04': '2',
        'm8vAtAq05': '1',
    },
    'm8vAtB': {
        'm8vAtBq01': '4',
        'm8vAtBq02': '12',
        'm8vAtBq03': '9',
        'm8vAtBq04': '6',
        'm8vAtBq05': '10',
        'm8vAtBq06': '8',
        'm8vAtBq07': '3',
        'm8vAtBq08': '11',
        'm8vAtBq09': '1',
        'm8vAtBq10': '5'
    },
    'm8vAtC': {
        'm8vAtCq01': '2',
        'm8vAtCq02': '2',
        'm8vAtCq03': '1',
        'm8vAtCq04': '1'
    },
    'm8vAtD': {
        'm8vAtDq01': 'if',
        'm8vAtDq02': 'unless',
        'm8vAtDq03': 'unless',
        'm8vAtDq04': 'if',
        'm8vAtDq05': 'unless',
    },
    'm8vAtE': {
        'm8vAtEq01': 'wouldnt have told',
        'm8vAtEq02': 'would stop',
        'm8vAtEq03': 'becomes',
        'm8vAtEq04': 'will win',
        'm8vAtEq05': 'earned',
        'm8vAtEq06': 'boils',
        'm8vAtEq07': 'would have gone',
        'm8vAtEq08': 'wont come',
        'm8vAtEq09': 'would take',
        'm8vAtEq10': 'dont water',
    },
    'm8vAtF': {
        'm8vAtFq01': '3',
        'm8vAtFq02': '4',
        'm8vAtFq03': '2',
        'm8vAtFq04': '1',
        'm8vAtFq05': '5',
    },
    'm8vAtG': {
        'm8vAtGq01': 'a',
        'm8vAtGq02': 'b',
        'm8vAtGq03': 'c',
        'm8vAtGq04': 'd',
        'm8vAtGq05': 'd',
        'm8vAtGq06': 'c',
    },
    'm8vAtH': {
        'm8vAtHq01': '3',
        'm8vAtHq02': '1',
        'm8vAtHq03': '2',
        'm8vAtHq04': '6',
        'm8vAtHq05': '5',
    },
    'm8vBtA': {
        'm8vAtAq01': '2',
        'm8vAtAq02': '2',
        'm8vAtAq03': '2',
        'm8vAtAq04': '2',
        'm8vAtAq05': '2',
    },
    'm8vBtB': {
        'm8vBtBq01': '3',
        'm8vBtBq02': '5',
        'm8vBtBq03': '6',
        'm8vBtBq04': '4',
        'm8vBtBq05': '9',
        'm8vBtBq06': '8',
        'm8vBtBq07': '13',
        'm8vBtBq08': '12',
        'm8vBtBq09': '1',
        'm8vBtBq10': '2'
    },
    'm8vBtC': {
        'm8vBtCq01': '2',
        'm8vBtCq02': '1',
        'm8vBtCq03': '2',
        'm8vBtCq04': '2'
    },
    'm8vBtD': {
        'm8vBtDq01': 'unless',
        'm8vBtDq02': 'if',
        'm8vBtDq03': 'unless',
        'm8vBtDq04': 'if',
        'm8vBtDq05': 'unless',
    },
    'm8vBtE': {
        'm8vBtEq01': 'will win',
        'm8vBtEq02': 'had played',
        'm8vBtEq03': 'floats',
        'm8vBtEq04': 'apologise ',
        'm8vBtEq05': 'dont come',
        'm8vBtEq06': 'heat',
        'm8vBtEq07': 'would go',
        'm8vBtEq08': 'hadnt hurt',
        'm8vBtEq09': 'would have come',
        'm8vBtEq10': 'didnt have',
    },
    'm8vBtF': {
        'm8vBtFq01': '1',
        'm8vBtFq02': '5',
        'm8vBtFq03': '4',
        'm8vBtFq04': '3',
        'm8vBtFq05': '2',
    },
    'm8vBtG': {
        'm8vBtGq01': 'b',
        'm8vBtGq02': 'c',
        'm8vBtGq03': 'a',
        'm8vBtGq04': 'a',
        'm8vBtGq05': 'd',
        'm8vBtGq06': 'a',
    },
    'm8vBtH': {
        'm8vBtHq01': '6',
        'm8vBtHq02': '5',
        'm8vBtHq03': '4',
        'm8vBtHq04': '3',
        'm8vBtHq05': '1',
    }
}
var currentTest = "";
function getAnswers(testId) {
    return answers[testId];
}

function init() {
    for (let testId in answers) {
        let status = getCookie(testId);
        let button = document.getElementById(testId+"button");
        if (!button) continue;
        if (status) {
            if (status == "pаssеd") {
                button.style.backgroundColor = "lightgreen";
            } else {
                button.style.backgroundColor = "lightpink";
            }
        }
    }
}
function selectCource(courceName) {
    location.href = courceName + ".html";
}
function goHome() {
    pauseAudio();
    hideAll();
    document.getElementById('homeScreen').style.display = 'block';

}
function hideAll() {
    var els = document.getElementsByClassName('screen');
    Array.prototype.forEach.call(els, function(el) {
        el.style.display = 'none';
    });
    document.getElementById('testBottomButtons').style.display = 'none';
}
function test(testId) {
    currentTest = testId;
    if (!answers[currentTest]) return;

    hideAll();
    if (document.getElementById(currentTest)) {
        document.getElementById(currentTest).style.display = 'block';

        var els = document.getElementsByTagName('select');
        Array.prototype.forEach.call(els, function (el) {
            el.style.backgroundColor = '';
        });
        document.getElementById('testBottomButtons').style.display = 'block';
    } else {
        loadAndStartTest(currentTest);
    }
}
function loadAndStartTest(testId) {
    fetch('tests/'+testId+'.html?'+ Math.random())
        .then(resp => resp.text())
        .then(text => {
            let testDiv = document.createElement('div');
            testDiv.innerHTML = text;
            // document.body.append(testDiv.firstChild);
            document.body.insertBefore(testDiv.firstChild, document.getElementById('testBottomButtons'));
            test(testId);
        });
}

function check() {
    pauseAudio();
    var correctAnswersCount = 0;
    var answers = getAnswers(currentTest);
    var questionsCount = 0;
    for (var key in answers) {
        questionsCount++;
        if (normalizeText(document.getElementById(key).value) === answers[key]) {
            correctAnswersCount++;
            document.getElementById(key).style.backgroundColor = 'lightgreen';
        } else {
            document.getElementById(key).style.backgroundColor = 'lightpink';
        }
    }


    if (correctAnswersCount === questionsCount) {
        document.getElementById("completedTestId").innerText = currentTest;
        document.getElementById("testPassedMessage").style.visibility="visible";
        document.getElementById(currentTest+"button").style.backgroundColor = "lightgreen";
        setCookie(currentTest, "pаssеd");
    } else {
        document.getElementById("failedTestResult").innerText = "Test " + currentTest + " failed. (" + correctAnswersCount + "/" + questionsCount + ")";
        document.getElementById("testFailedMessage").style.visibility="visible";
        document.getElementById(currentTest+"button").style.backgroundColor = "lightpink";
        setCookie(currentTest, "failed");
    }
}

function normalizeText(text) {
    return text.trim().toLowerCase().replace("'",'');
}

function hideMe(element) {
    if(element) {
        element.style.visibility = "hidden";
    }
}

function pauseAudio() {
    var audios = document.getElementsByTagName('audio');
    Array.prototype.forEach.call(audios, function (el) {
        el.pause();
    });
}